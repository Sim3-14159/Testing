<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HTML Editor</title>
<style>
  body { display: flex; flex-direction: column; height: 100vh; margin: 0; font-family: sans-serif; }
  #top { display: flex; flex: 1; }
  textarea { width: 50%; height: 100%; padding: 10px; box-sizing: border-box; font-family: monospace; }
  iframe { width: 50%; height: 100%; border: none; }
  #buttons { padding: 5px; background: #eee; }
  button { margin-right: 5px; }
</style>
</head>
<body>

<div id="buttons">
  <button id="add-css">Add CSS File</button>
</div>

<div id="top">
  <textarea id="editor"><!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="style.css">
</head>
<body>
<h1>Hello world!</h1>
</body>
</html></textarea>

  <iframe id="preview"></iframe>
</div>

<script>
const editor = document.getElementById('editor');
const preview = document.getElementById('preview');
const addCssBtn = document.getElementById('add-css');

// Virtual filesystem: filename â†’ content
let files = {
    "index.html": editor.value,
    "style.css": "body { background: #eef; color: #333; font-family: sans-serif; }"
};

// Update iframe preview
function updatePreview() {
    files["index.html"] = editor.value;
    let html = editor.value;

    // Replace <link rel="stylesheet" href="..."> with virtual CSS content
    html = html.replace(/<link\s+rel=["']stylesheet["']\s+href=["'](.+?)["']\s*\/?>/gi, (match, href) => {
        if (files[href]) return `<style>${files[href]}</style>`;
        return match; // leave it as-is if file doesn't exist
    });

    preview.srcdoc = html;
}

// Add a new CSS file
addCssBtn.addEventListener('click', () => {
    const name = prompt("Enter CSS filename (e.g., style2.css):");
    if (!name) return;
    const content = prompt("Enter CSS content:", "body { }") || "";
    files[name] = content;
    alert(`Added virtual CSS file: ${name}`);
});

// Live update
editor.addEventListener('input', updatePreview);

// Initial render
updatePreview();
</script>

</body>
</html>
